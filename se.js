var cookie={mycookie:{},init:function(){var e=document.cookie;e=e.split("; ");var d=[];for(var b=0,a=e.length;b<a;b++){d=e[b].split("=");this.mycookie[d[0]]=unescape(d[1])}var c=this.attr("lang");this.setlang(c);if(undefined===this.attr("defaultType")){this.attr("defaultType","search")}if(undefined===this.attr("defaultEngine")){this.attr("defaultEngine","google")}if(undefined===this.attr("newin")){this.attr("newin","1")}},attr:function(c,e,a,d){if(typeof(e)==="undefined"){return typeof(this.mycookie[c])==="undefined"?undefined:this.mycookie[c]}else{if(typeof(a)==="undefined"){a="Sat, 19 Jan 2037 03:52:43 GMT"}else{var b=new Date();b.setTime(b.getTime()+a*24*60*60*1000);a=b.toGMTString()}d=d?d:"/";e=escape(e);document.cookie=c+"="+e+";expires="+a+";path="+d;this.mycookie[c]=e;return this.mycookie[c]}},remove:function(b){var c=this.attr(b);if(undefined!==c){var a=new Date();a.setTime(a.getTime()-1);document.cookie=b+"="+c+";expires="+a.toGMTString();delete this.mycookie[b]}return true},setlang:function(a){if(undefined===a||("zh"!==a&&"en"!==a)){a=(undefined===window.navigator.language)?window.navigator.browserLanguage:window.navigator.language;if("zh-cn"===a.toLowerCase()){return this.attr("lang","zh")}else{return this.attr("lang","en")}}return this.attr("lang",a)}};$.toJSONString=JSON.stringify||function(e){var d=typeof(e);if(d!=="object"||e===null){if(d=="string"){e='"'+e+'"'}return String(e)}else{var f,b,c=[],a=(e&&e.constructor==Array);for(f in e){b=e[f];d=typeof(b);if(d==="string"){b='"'+b+'"'}else{if(d==="object"&&b!==null){b=JSON.stringify(b)}}c.push((a?"":'"'+f+'":')+String(b))}return(a?"[":"{")+String(c)+(a?"]":"}")}};$(function(){cookie.init();var i=cookie.attr("defaultType"),a=cookie.attr("defaultEngine"),k=$.parseJSON(cookie.attr("history"))||[],b=cookie.attr("lang"),f=false,l=-1,d=window.config,j=0,c="",m={search:"http://suggestion.baidu.com/su?wd=@&p=3&cb=?",music:"http://nssug.baidu.com/su?wd=@&prod=mp3&cb=?",video:"http://nssug.baidu.com/su?wd=@&prod=video&cb=?",question:"http://nssug.baidu.com/su?wd=@&prod=zhidao&cb=?",image:"http://nssug.baidu.com/su?wd=@&ie=utf-8&prod=image&cb=?",map:"http://map.baidu.com/su?wd=@&ie=utf-8&cid=1&type=0&newmap=1&callback=?",doc:"http://nssug.baidu.com/su?wd=@&prod=wenku&oe=utf-8&cb=?",shop:"http://suggest.taobao.com/sug?area=etao&code=utf-8&q=@&callback=?"};if(!k instanceof Array){k=[]}function h(r,x,A){try{var z="",u="",w="",p=cookie.attr("bgimg"),t;t=d.placeholder[r];for(var y in d.searches){if(d.searches.hasOwnProperty(y)){w=(y==x)?"checked":"";u+='<li><label><input type="radio" name="type" value="'+y+'" '+w+">"+d.searches[y][r]+"</label></li>";w=(y==x)?" current":"";z+='<ul class="'+y+w+'">';keys=d.searches[y]["engines"];for(var s in keys){if(keys.hasOwnProperty(s)){w=(s==A&&y==x)?'class="current"':"";z+='<li data="'+s+'" '+w+">"+keys[s][r]+"</li>"}}z+="</ul>"}}document.title=d.title[r];if(p){$(document.body).css("background-image","url("+p+")");$(".search-wrapper,.appinfo").addClass("trsprt-bg")}$("#switch-lang").html(d.lang[r]);$("#app-name").html(d.title[r]);$("#ico").addClass("ico-"+x);$("#ph").html(t);$("#search-btn").text(d.submit[r]);$("#search-engine-list").html(z);$("#search-cat").html(u);var q=null;if(0===$("#search-engine-list ."+x).length){q=$("#search-engine-list ul:eq(0)");x=q.attr("class");q.addClass("current");cookie.attr("defaultType",x)}if(0===$("#search-engine-list ."+x+" li.current").length){q=$("#search-engine-list ."+x+" li:eq(0)");searchEngine=q.attr("data");q.addClass("current");cookie.attr("defaultEngine",searchEngine)}if(!$("#search-cat input:checked").length){$("#search-cat li:eq(0) label").click()}e(x,A)}catch(v){alert("Init error! You may try to reload this page.")}}function g(){var q="";j=0;l=-1;if(k.length){j=k.length;for(var p=0;p<j;++p){q+="<li>"+k[p]+"</li>"}q+='<li id="clear-history">'+d.clearhistory[b]+"</li>"}return q}function n(){$("#sug").css({top:$(".search-form").offset().top+$(".search-form").height(),left:$(".search-form").offset().left})}function e(p,r){var s=d.searches[p]["engines"][r],q=s.hiddens,t="";$("#search-form").attr("accept-charset",s.charset||"utf-8");$("#search-form").attr("action",s.url);$("#isa").attr("name",s.key);if(q){for(var u in q){if(q.hasOwnProperty(u)){t+='<input type="hidden" name="'+u+'" value="'+q[u]+'">'}}}$("#hiddens").html(t);$("#link").attr("href",s.link)}function o(p,r){if(!m[r]){return}var q;p=p.replace(/^\s*|\s*$/g,"");if(p===""){$("#sug").hide();return}q=m[r].replace("@",encodeURIComponent(p));try{$.getJSON(q,function(v){var w=0,y="",t=0,x,u;p=p.toLowerCase();for(u=0,w=k.length;u<w;++u){if(-1!==k[u].toLowerCase().indexOf(p)){++t;y+='<li class="s-h">'+k[u]+"</li>"}}u=t;if(r=="shop"){x=v.result;w=Math.min(x.length,10);if(w){for(;u<w;++u){y+="<li>"+x[u][0]+"</li>"}}}else{x=v.s;w=Math.min(x.length,10);if(w){if(r=="map"){for(;u<w;++u){y+="<li>"+x[u].replace(/(\$)|(\d*$)/g," ")+"</li>"}}else{for(;u<w;++u){y+="<li>"+x[u]+"</li>"}}}}if(w){$("#sug").html(y).show()}else{$("#sug").hide()}j=w})}catch(s){j=0}l=-1}h(b,i,a);n();$("#sug").html(g());$("#isa").on("click focus",function(p){p.stopPropagation();$("#isa,#search-btn").addClass("box-shadow")}).focus();$("#ph").on("click",function(p){p.stopPropagation();$("#isa").focus()});$(document).on("click",function(){$("#sug").hide();$("#isa,#search-btn").removeClass("box-shadow");$("#setting-icon").removeClass("current");$("#setting-panel").hide()});$(document).on("keydown",function(p){if(p.keyCode===36){$("#isa").focus()}});window.onresize=function(){n()};window.onfocus=function(){$("#isa").focus()};window.onblur=function(){$("#sug").hide()};window.onbeforeunload=function(p){cookie.attr("history",$.toJSONString(k));cookie.attr("defaultType",i);cookie.attr("defaultEngine",a);cookie.attr("lang",b)};$("#switch-lang").on("click","span",function(){b=$(this).attr("data");h(b,i,a)});$("#setting-icon").on("click",function(p){p.stopPropagation();$(this).addClass("current");$("#setting-panel").show();$("#bgimg").focus()});$("#set-bgimg").on("click",function(t){t.stopPropagation();var r=$("#bgimg").val(),q=new Image(),p,s;p=function(){$(document.body).css("background-image","url("+r+")");$("#bgimg").val("");cookie.attr("bgimg",r);$("#setting-icon").removeClass("current");$("#setting-panel").hide();$(".search-wrapper,.appinfo").addClass("trsprt-bg");q=null};s=function(){$(document.body).css("background-image","");cookie.attr("bgimg","");$(".search-wrapper,.appinfo").removeClass("trsprt-bg");$("#imgerror-tip").html(d.imgloaderror[cookie.attr("lang")]).show();setTimeout(function(){$("#imgerror-tip").hide()},2000);q=null};q.onerror=s;q.onload=p;if(r){q.src=r}});$("#bgimg").on("keydown",function(p){if(p.keyCode===13){$("#set-bgimg").click();return false}});$("#setting-panel").on("click",function(p){p.stopPropagation()});$("#isa").on("input propertychange",function(p){if(""===$(this).val()){$("#ph").show();c="";if(!f){$("#sug").html(g()).hide()}}else{$("#ph").hide();if(!f&&c!=$(this).val()){c=$(this).val();o(c,i)}}});$("#isa").on("keydown",function(u){var r=true,s=0,w="",p=$("#sug"),v=$("#ph");f=false;switch(u.keyCode){case 9:var t,q;if(u.shiftKey){t=$("#search-cat li").length;q=$("#search-cat li input:checked").parents("li").index()|0;++q;q%=t;$("#search-cat li:eq("+q+") label").click();$("#isa").focus()}else{t=$("."+i+" li").length;q=$("."+i+" li.current").index()|0;++q;q%=t;$("."+i+" li:eq("+q+")").click()}r=false;break;case 27:p.hide();r=false;break;case 38:if(!j){return r}f=true;p.show();v.hide();s=l-1;if(s<-1){s=j-1}$("#sug li:eq("+l+")").removeClass("current");w=(-1==s)?c:$("#sug li:eq("+s+")").addClass("current").text();$(this).val(w);if(w===""){$("#ph").show()}l=s;r=false;break;case 40:if(!j){return r}f=true;p.show();v.hide();s=l+1;if(s>=j){s=-1}$("#sug li:eq("+l+")").removeClass("current");w=(-1==s)?c:$("#sug li:eq("+s+")").addClass("current").text();$(this).val(w);if(w===""){$("#ph").show()}l=s;r=false;break;default:break}return r});$("#sug").on("hover","li",function(){var p=$(this).index();if(p===l){$(this).addClass("current")}else{$("#sug li:eq("+l+")").removeClass("current");$("#sug li:eq("+p+")").addClass("current");l=p}});$("#sug").on("click","li",function(p){if(p.srcElement.id=="clear-history"){k=[];j=0;$("#sug").html("").hide();$("#isa").focus();return false}c=$(this).html();$("#isa").val(c);$("#search-form").submit()});$("#search-cat").on("click","li label",function(){var p=$(this).children("input");if(i!=p.val()){$("#search-engine-list ."+i+" li.current").removeClass("current");$("#search-engine-list ."+i).removeClass("current");$("#ico").removeClass("ico-"+i);i=p.val();$("#ico").addClass("ico-"+i);$("#search-engine-list ."+i).addClass("current");a=$("#search-engine-list ."+i+" li:eq(0)").addClass("current").attr("data");e(i,a)}$("#isa").focus()});$("#search-engine-list").on("click","ul li",function(){if(a!=$(this).attr("data")){$("#search-engine-list ul li.current").removeClass("current");a=$(this).addClass("current").attr("data");e(i,a)}$("#isa").focus()});$("#search-form").on("submit",function(){$("#sug").hide();c=$("#isa").val();if(""===c){return false}else{if(" "===c||a==="qiyi"||(i==="map"&&a==="baidu")){var p;if(a==="qiyi"){p=$("#search-form").attr("action")+"q_";p+=encodeURIComponent(c);$("#link").attr("href",p)}else{if(a==="baidu"){p=$("#search-form").attr("action")+"?newmap=1&ie=utf-8&s=s%26wd%3D";p+=encodeURIComponent(c)+"%26c%3D1";$("#link").attr("href",p)}}$("#link")[0].click();return false}else{var q=0,r=k.length;if(r>10){k.splice(10,r);r=10}for(;q<r;++q){if(c==k[q]){if(q!==0){k.splice(q,1);k.unshift(c)}break}}if(q===r){k.unshift(c);if(r===10){k.splice(10,1)}}return true}}})});